<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Starbhak Mart</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-dark">
    <nav class="navbar navbar-expand-lg navbar-light bg-warning">
        <div class="container-fluid">
            <a class="navbar-brand ms-3 fw-bold" href="#" style="color: white;">Starbhak Mart</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
            </div>
            <form class="d-flex">
                <input class="form-control me-2 border border-dark" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-dark" type="submit"><img src="img/loupe.png" alt="" style="width: 20px; height: 20px;"></button>
              </form>
        </div>
    </nav>

    <div class="listItem">

        <div class="bg-light mt-2 fs-3 fw-bold rounded border border-warning" id="menu" style="width: 58rem; height: 50px;">
            <p class="ms-3 mt-1" style="color: black;">Menu</p>
        </div>

        <div class="container">
            <div class="row row-cols-2 row-cols-lg-5 g-2 g-lg-3 me-4 mt-1">
              <div class="col">                                                 
                <div class="p-3 border bg-warning rounded"><img src="makanan/ayam bakar.jpeg" alt="" style="width: 110px; height: 110px; margin-left: 12px;" class="rounded">
                <p class="mt-2 text-center" style="color: white;">Ayam Bakar</p><hr style="color: white;"><h4 class="text-center" style="color: white;">Rp. 30.000</h4>
                <button class="btn btn-outline-light" style="width: 136px;">
                    <img src="img/basket.png" alt="" style="width: 30px; height: 30px;">
                </button></div>
              </div>
              <div class="col">
                <div class="p-3 border bg-warning rounded"><img src="minuman/es teh manis.jpeg" alt="" style="width: 110px; height: 110px; margin-left: 12px;" class="rounded">
                    <p class="mt-2 text-center" style="color: white;">Es Teh Manis</p><hr style="color: white;"><h4 class="text-center" style="color: white;">Rp. 7.000</h4>
                    <button class="btn btn-outline-light" style="width: 136px;">
                        <img src="img/basket.png" alt="" style="width: 30px; height: 30px;">
                    </button></div>
              </div>
              <div class="col">
                <div class="p-3 border bg-warning rounded"><img src="makanan/download.jpeg" alt="" style="width: 110px; height: 110px; margin-left: 12px;" class="rounded">
                    <p class="mt-2 text-center" style="color: white;">Ketoprak</p><hr style="color: white;"><h4 class="text-center" style="color: white;">Rp. 12.000</h4>
                    <button class="btn btn-outline-light" style="width: 136px;">
                        <img src="img/basket.png" alt="" style="width: 30px; height: 30px;">
                    </button></div>
              </div>
              <div class="col">
                <div class="p-3 border bg-warning rounded"><img src="makanan/ikan bakar.jpeg" alt="" style="width: 110px; height: 110px; margin-left: 12px;" class="rounded">
                    <p class="mt-2 text-center" style="color: white;">Ikan Bakar</p><hr style="color: white;"><h4 class="text-center" style="color: white;">Rp. 25.000</h4>
                    <button class="btn btn-outline-light" style="width: 136px;">
                        <img src="img/basket.png" alt="" style="width: 30px; height: 30px;">
                    </button></div>
              </div>
              <div class="col">
                <div class="p-3 border bg-warning rounded"><img src="makanan/pecel ayam.jpeg" alt="" style="width: 110px; height: 110px; margin-left: 12px;" class="rounded">
                    <p class="mt-2 text-center" style="color: white;">Pecel Ayam</p><hr style="color: white;"><h4 class="text-center" style="color: white;">Rp. 16.000</h4>
                    <button class="btn btn-outline-light" style="width: 136px;">
                        <img src="img/basket.png" alt="" style="width: 30px; height: 30px;">
                    </button></div>
              </div>
              <div class="col">
                <div class="p-3 border bg-warning rounded"><img src="makanan/nasi goreng.jpeg" alt="" style="width: 110px; height: 110px; margin-left: 12px;" class="rounded">
                    <p class="mt-2 text-center" style="color: white;">Nasi Goreng</p><hr style="color: white;"><h4 class="text-center" style="color: white;">Rp. 16.000</h4>
                    <button class="btn btn-outline-light" style="width: 136px;">
                        <img src="img/basket.png" alt="" style="width: 30px; height: 30px;">
                    </button></div>
              </div>
              <div class="col">
                <div class="p-3 border bg-warning rounded"><img src="minuman/jus jeruk.jpeg" alt="" style="width: 110px; height: 110px; margin-left: 12px;" class="rounded">
                    <p class="mt-2 text-center" style="color: white;">Jus Jeruk</p><hr style="color: white;"><h4 class="text-center" style="color: white;">Rp. 7.000</h4>
                    <button class="btn btn-outline-light" style="width: 136px;">
                        <img src="img/basket.png" alt="" style="width: 30px; height: 30px;">
                    </button></div>
              </div>
              <div class="col">
                <div class="p-3 border bg-warning rounded"><img src="minuman/jus mangga.jpeg" alt="" style="width: 110px; height: 110px; margin-left: 12px;" class="rounded">
                    <p class="mt-2 text-center" style="color: white;">Jus Mangga</p><hr style="color: white;"><h4 class="text-center" style="color: white;">Rp. 7.000</h4>
                    <button class="btn btn-outline-light" style="width: 136px;">
                        <img src="img/basket.png" alt="" style="width: 30px; height: 30px;">
                    </button></div>
              </div>
              <div class="col">
                <div class="p-3 border bg-warning rounded"><img src="makanan/gado gadi.jpeg" alt="" style="width: 110px; height: 110px; margin-left: 12px;" class="rounded">
                    <p class="mt-2 text-center" style="color: white;">Gado Gado</p><hr style="color: white;"><h4 class="text-center" style="color: white;">Rp. 10.000</h4>
                    <button class="btn btn-outline-light" style="width: 136px;">
                        <img src="img/basket.png" alt="" style="width: 30px; height: 30px;">
                    </button></div>
              </div>
              <div class="col">
                <div class="p-3 border bg-warning rounded"><img src="minuman/teh manis.jpeg" alt="" style="width: 110px; height: 110px; margin-left: 12px;" class="rounded">
                    <p class="mt-2 text-center" style="color: white;">Teh Manis</p><hr style="color: white;"><h4 class="text-center" style="color: white;">Rp. 5.000</h4>
                    <button class="btn btn-outline-light" style="width: 136px;">
                        <img src="img/basket.png" alt="" style="width: 30px; height: 30px;">
                    </button></div>
              </div>
              <div class="col">
                <div class="p-3 border bg-warning rounded"><img src="makanan/ikan goreng.jpeg" alt="" style="width: 110px; height: 110px; margin-left: 12px;" class="rounded">
                    <p class="mt-2 text-center" style="color: white;">Ikan Goreng</p><hr style="color: white;"><h4 class="text-center" style="color: white;">Rp. 22.000</h4>
                    <button class="btn btn-outline-light" style="width: 136px;">
                        <img src="img/basket.png" alt="" style="width: 30px; height: 30px;">
                    </button></div>
              </div>
            </div>
          </div>
    </div>

    <div class="sideBar">

        <div class="dropdown">
            <select name="" id="" class="takeaway btn-light ms-3">
                <option value="Take Away">Take Away</option>
                <option value="Dine In">Dine In</option>
            </select>
        </div>

        <div class="customer">
            <button type="button" class="mangjay btn btn-light ms-5"><img src="img/support.png" alt="" class="support">mang.jay</button>
        </div>

        <!-- Tambahkan ini di dalam div "sideBar" -->
        <p class="total bg-light rounded" style="color: black;">Total: Rp. 0,00</p>

        <div class="cartItems">
            <!-- Ini adalah div di mana item belanja akan ditampilkan -->
        </div>

        <button onclick="tampil()" class="btn-outline-warning rounded ms-3 mt-2 bg-light" style="width: 280px;">
            <p class="text-center mt-1">Pesan</p>
        </button>

        <div id="noconfirmation" class="bg-light rounded p-3 mt-2" style="display: none;">
            <p class="text-center">Keranjang masih kosong, <br>
                Mohon pesan Terlebih dahulu!</p>
        </div>

        <div id="confirmation" class="bg-light rounded p-3 mt-2" style="display: none;">
            <p class="text-center">Pemesanan berhasil! <br>
                <button class="btn btn-warning mt-2 rounded" id="struck">
                    Lihat Struck
                </button>
            </p>
        </div>

        <div id="struk" class="bg-light rounded p-3 mt-2" style="display: none;">
            <h2 class="text-center">Struk Pembelian</h2>
            <div class="purchasedItems">
                <!-- Ini adalah tempat di mana item yang dibeli akan ditampilkan -->
            </div>
            <p class="text-center total-amount"></p>
        </div>
    

    </div>

    <script>

        const buttons = document.querySelectorAll('.btn-outline-light');

        buttons.forEach(button => {
        button.addEventListener('click', function() {
                const itemName = this.parentElement.querySelector('.text-center').innerText;
                const itemPriceText = this.parentElement.querySelector('h4').innerText;
                const itemPrice = parseInt(itemPriceText.replace('Rp. ', '').replace('.', ''));

                totalBelanja += itemPrice;

                const newItem = document.createElement('div');
                newItem.classList.add('addedItem');
                const itemInfo = document.createElement('p');
                itemInfo.textContent = `${itemName} - ${itemPriceText}`;

                // Tombol delete untuk setiap item di sidebar
                const deleteBtn = document.createElement('button');
                deleteBtn.classList.add('deleteBtn');
                deleteBtn.textContent = 'Hapus';
                deleteBtn.addEventListener('click', function() {
                    totalBelanja -= itemPrice;
                    newItem.remove();
                    updateTotal();
                });

                newItem.appendChild(itemInfo);
                newItem.appendChild(deleteBtn);

                const cartItems = document.querySelector('.cartItems');
                cartItems.appendChild(newItem);

                updateTotal();
            });
        });

        // Function untuk memperbarui total belanja
        function updateTotal() {
            const totalElement = document.querySelector('.total');
            totalElement.innerText = `Total: Rp. ${totalBelanja.toLocaleString()}`;
        }

        // Inisialisasi total belanja
        let totalBelanja = 0;

        buttons.forEach(button => {
        button.addEventListener('click', function() {
            const itemName = this.parentElement.querySelector('.text-center').innerText;
            const itemPriceText = this.parentElement.querySelector('h4').innerText;
            const itemPrice = parseInt(itemPriceText.replace('Rp. ', '').replace('.', ''));


            const newItem = document.createElement('div');
            newItem.classList.add('addedItem');

            const sidebar = document.querySelector('.sideBar');
            sidebar.appendChild(newItem);

            // Menampilkan total belanja di sidebar
            const totalElement = document.querySelector('.total');
            totalElement.innerText = `Total: Rp. ${totalBelanja.toLocaleString()}`;
        });
        });

            // Menangkap form pencarian
            const searchForm = document.querySelector('form');
            searchForm.addEventListener('submit', function(event) {
            event.preventDefault();

            const searchTerm = this.querySelector('input').value.toLowerCase();
            const menuItems = document.querySelectorAll('.col');

            menuItems.forEach(item => {
            const itemName = item.querySelector('.text-center').innerText.toLowerCase();
                
            // Tambahkan pengecualian untuk item yang ada di sidebar
            const isAddedItem = item.classList.contains('addedItem');

            if (isAddedItem) {
                item.style.display = 'none'; // Item yang ditambahkan ke sidebar tetap ditampilkan
            } else {
                if (itemName.includes(searchTerm)) {
                        item.style.display = 'block'; // Jika cocok dengan kata kunci, tampilkan item
                } else {
                        item.style.display = 'none'; // Jika tidak cocok, sembunyikan item
                }
            }
        });
    });


        // Tambahkan event 'input' untuk menampilkan semua item kembali ketika kotak pencarian dikosongkan
        const searchInput = searchForm.querySelector('input');
        searchInput.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            const menuItems = document.querySelectorAll('.col');

            menuItems.forEach(item => {
                const itemName = item.querySelector('.text-center').innerText.toLowerCase();
        
                if (itemName.includes(searchTerm)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none'; // Mengubah display menjadi kosong agar menggunakan tampilan default
                }
            });
        });

        function tampil() {
            const confirmationDiv = document.getElementById('confirmation');
            const noConfirmationDiv = document.getElementById('noconfirmation');

            if (totalBelanja > 0) {
                confirmationDiv.style.display = 'block';
                noConfirmationDiv.style.display = 'none';
            } else {
                noConfirmationDiv.style.display = 'block';
                confirmationDiv.style.display = 'none';

                setTimeout(() => {
                    noConfirmationDiv.style.display = 'none';
                }, 2000);
            }
        }

        const struck = document.getElementById('struck');
        struck.addEventListener('click', function() {
            window.location.href = 'struck.html';
        });

        // Inisialisasi keranjang sebagai objek untuk melacak item dan jumlahnya
const cart = {};

buttons.forEach(button => {
    button.addEventListener('click', function() {
        const itemName = this.parentElement.querySelector('.text-center').innerText;
        const itemPriceText = this.parentElement.querySelector('h4').innerText;
        const itemPrice = parseInt(itemPriceText.replace('Rp. ', '').replace('.', ''));

        // Cek apakah item sudah ada di keranjang
        if (cart[itemName]) {
            // Jika sudah ada, tambahkan jumlahnya
            cart[itemName].quantity++;
        } else {
            // Jika belum ada, tambahkan item baru ke keranjang
            cart[itemName] = {
                price: itemPrice,
                quantity: 1
            };
        }

        // Memperbarui tampilan di sidebar dengan jumlah item yang ditambahkan
        updateSidebar();
    });
});

// Fungsi untuk memperbarui tampilan di sidebar
function updateSidebar() {
    const cartItems = document.querySelector('.cartItems');
    cartItems.innerHTML = ''; // Membersihkan tampilan sebelum menambahkan kembali

    let totalBelanja = 0;

    // Loop melalui setiap item yang ada di keranjang
    for (const itemName in cart) {
        const item = cart[itemName];
        const totalPrice = item.price * item.quantity;

        totalBelanja += totalPrice;

        const newItem = document.createElement('div');
        newItem.classList.add('addedItem');

        const itemInfo = document.createElement('p');
        itemInfo.textContent = `${itemName} - Rp. ${item.price.toLocaleString()} x ${item.quantity}`;

        // Tombol delete untuk setiap item di sidebar
        const deleteBtn = document.createElement('button');
        deleteBtn.classList.add('deleteBtn');
        deleteBtn.textContent = 'Hapus';
        deleteBtn.addEventListener('click', function() {
            totalBelanja -= totalPrice;
            delete cart[itemName]; // Hapus item dari keranjang
            newItem.remove();
            updateSidebar();
        });

        newItem.appendChild(itemInfo);
        newItem.appendChild(deleteBtn);

        cartItems.appendChild(newItem);
    }

    // Menampilkan total belanja di sidebar
    const totalElement = document.querySelector('.total');
    totalElement.innerText = `Total: Rp. ${totalBelanja.toLocaleString()}`;
}


    </script>
  
</body>
</html>
